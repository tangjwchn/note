# 7. 计算机网络和因特尔
个人计算机的发展带动了商业、工业、科学和教育的巨大改变。网络也发生了类似的变革。技术的进步使得通信线路能传送更多、更快的信号。而不断发展的服务使得我们能够使用这些扩展的能力。计算机网络领域的研究导致了新技术的产生 - 在全球各个地方交换文本、音频和视频等数据，在任何时候快速、准确地下载或上传信息。

主机设备：如台式机、笔记本电脑、工作站、手机等  
连接设备：
* 路由器：将一个网络与另一个网络相连
* 交换机：将不同设备连接在一起
* 调制调节器：可以改变数据形式

## 7.1 概述
### 7.1.1 网络
网络是一系列可用于通信的设备相互连接构成的。在这个定义里面，一个设备可以是一台主机。在这个定义中，设备也可以是一个连接设备，比如用来将一个网络与另一个网络相连接的路由器，一个将不同设备连接在一起的交换机，或者一个用于改变数据形式的调制解调器，等等。在一个网络中，这些设备都通过有线或无线传输媒介（比如电缆或无线信号）互相连接。当我们在家通过即插即用路由器连接两台计算机时，虽然规模很小，但已经建造了一个网络。

**1、局域网**  
局域网（LAN）通常是与单个办公室、建筑或校园内的几个主机相连的私有网络。基于机构的需求，一个局域网既可以简单到某人家庭办公室中的两台个人计算机和一台打印机，也可以扩大至一个公司范围，并包括音频和视频设备。在一个局域网中的每一台主机都有个为这台主机在局域网中唯一定义的一个标识符和一个地址。一台主机向另一台主机发送的数据包中包括源主机和目标主机的地址。

**2、广域网**  
广域网（WAN）也是通信设备互连构成的。但是广域网与局域网之间有一些差别。局域网的大小通常是受限制的、跨越一个办公室、一座大楼或一个校园；而广域网的地理跨度更大，可以横跨一个城镇、一个州、一个国家，甚至横跨世界。局域网将主机互连，广域网则将交换机、路由器或调制器之类的连接设备互连。通常，局域网为机构私有，广域网则由通信公司创建并运营，并且租给使用它的机构。我们可以看到广域网的两种截然不同的案例：点对点广域网和交换广域网。

**3、互联网络**  
如今，很难看见独立存在的局域网或广域网，它们现在都是互相连接的。当两个或多个网络互相连接时，它们构成一个互联网络。

### 7.1.2 因特网
正如我们之前讨论过的，一个国际网是两个或多个可以互相通信的网络。最值得注意的网际网是因特网，它由成千上万个互连的网络组成。

因特网为几个骨干网、供应商网络和客户网络。在顶层，骨干网为通信公司所拥有，这些骨干网通过一些复杂的交换系统相互连接。我们把这些交换系统称为网络对等交汇点。在第二层，有一些规模较小的网络，这些网络称为供应商网络，它们付费使用骨干网上的一些服务。这些供应商网络与骨干网相连接，有时也连接其他供应商网络。

骨干网和供应商网络也被称为因特网服务提供商（ISP），骨干网通常被称为国际因特网服务供应商，供应商网络则被称为国内或地域性因特网服务提供商。

### 7.1.3 协议分层
协议定义了发送器、接收器以及所有中间设备必须遵守以保证有效地通信的规则。简单的通信可能只需要一条简单的协议，当通信变得复杂时，可能需要将任务分配到不同的协议层中，在这种情况下，我们在每一个协议层都需要一个协议，或者协议分层。

### 7.1.4 TCP/IP 协议族
如今因特网中使用的协议集被称为 TCP/IP 协议族。TCP/IP 协议族是一个分层协议，它由提供特定功能的交互式模块组成。分层这个术语说明每一个高层协议都基于一个或多个低层协议提供的服务。TCP/IP 协议族由 应用层、传输层、网络层、数据链路层、物理层 五个层次组成。

**1、分层架构**  
我们假设计算机 A 与计算机 B 通信。在这个通信中有 5 个通信设备，源主机、交换机1、路由器、交换机2、目标主机。

同时源主机需要在应用层中创建消息并将其通过协议层向下传送，这样这条消息才能物理地发送至目标主机。目标主机需要在物理层接收通信并通过其协议层将其发送至应用层。

路由器只涉及三个层，由于路由器仅用来路由，所以在路由器中没有传输层或应用层，虽然路由器总是包括在一个网络层中，但是它仅仅被包括在 n 个链接和物理层的组合中。

**2、地址和数据包名称**  
在因特网中，另外两个和协议分层有关的概念很值得一提，它们是地址和数据包名称。任何涉及两方的通信都需要两个地址：源地址和目标地址。

协议层和在该协议层使用的地址以及数据包名称之间存在联系。在应用层，我们通常使用名称（someorg.com）或者邮箱地址来定义提供服务的站点。在传输层，地址被称为端口号，端口号的作用是在源和目标之间定义应用层程序。端口号通过各程序的本地地址来辨别多个同时运行的本地程序。在网络层，这些地址在整个因特网范围下是全球化的，网络层的地址独一无二地定义了该设备与因特网的连接。链路层地址，有时称为 MAC 地址，是在本地定义的地址，每一个链路层地址在计算机网络（局域网）或广域网中定义一个特定的主机或者路由器。

## 7.2 应用层
TCP/IP 协议族的第五层叫作应用层。应用层向用户提供服务。通信由逻辑连接提供，也就是说，假设两个应用层通过它们之间假想的直接连接发送和接收消息。

### 7.2.1 提供服务
应用层与其他层不同的地方在于，它是协议族中的最高层。这一层中的协议不向其他协议提供服务，它们只接收传输层的协议提供的服务。这意味着该层的协议可以轻易去除。更新的协议可以使用传输层中任意一个协议提供的服务，这个协议就可以添加到应用层上。

### 7.2.2 应用层模式
很清楚的一点是，当使用网络时我们需要两个应用程序彼此交互：其中一个应用程序在世界上某处的一台计算机上运行，另一个应用程序在世界上某处的另一台计算机上运行。两个程序需要通过网络基础设施互相发送信息。

**1、传统模式：客户机 - 服务器模式 C/S**  
在这种模式中，服务提供者是一个应用程序，叫作服务器进程，这个进程一直运行，等待另一个叫做客户端进行的应用程序通过因特网连接请求服务。通常一些服务器进程可以提供某特定种类的服务，但是向这些服务器进程请求服务的用户会很多，因此很多服务器进程需要一直运行，而客户端进程只在需要时运行。

这种模式的一个问题是通信负荷集中由服务器承担，这说明服务器必须是一台极为强大的计算机。即使是一台极为强大的计算机也可能因为大量客户在同一时间尝试连接到服务器而过载。另外一个问题则是需要服务提供者愿意接受这个成本并为某一特定服务建造一台足够强大的服务器，也就是说，该服务必须向服务器回报相应的某种收入来鼓励这样一种安排。

### 7.2.3 标准客户机 - 服务器应用
在网络的生命周期中，发展出了几种客户机 - 服务器应用程序。不需要重新定义它们，但是需要理解这些程序的作用。

**1、万维网和超文本传输协议**  
万维网：Web是信息的存储库，这个存储库中叫做网页的文档分布在全世界并且相关的文档链接在一起。Web 的普及和发展与以上提到的两个术语有关：分布式和链接。分布促进Web 的发展，世界上的每一个 Web 服务器都可以向这个存储库添加一个新网页并且告知所有网络用户而不用担心导致个别服务器过载。链接使一个网页可以参考存储在世界上另一个地方的服务器中的另一个网页。网页之间的链接是通过一个叫做超文本的概念实现的。这个概念的引入发生在网络到来之前。这个想法是当文档中出现到另外一个文档的链接时用一个可以自动检索的机器检索系统中存储的另外一个文档。Web 将这个想法电子化了，当用户点击链接时，就会检索到被链接的文档。现在我们将为了描述链接的文本文档而改造的术语“超文本”改成了超媒体，来说明一个网页可以是文本文档、图像、音频文件或视频文件。

今天的 WWW 是一个分布式客户机 - 服务器服务，在这个服务中，客户可以通过浏览器来访问使用服务器的服务。但是，提供的服务分布在许多地方，称为站点。每个站点存储的一个或多个文档称为网页。然而，每个网页都包含到相同站点或不同站点的其他网页的链接。换句话说，一个网页可以很简单也可以很复杂。一个简单的网页不包含