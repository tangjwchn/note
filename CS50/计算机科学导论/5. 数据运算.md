# 5. 数据运算

数据上的运算可以分为三大类：算术运算、移位运算、逻辑运算。

## 5.1 算术运算
算术运算包括加、减、乘、除，适用于整数和浮点数。

### 5.1.1 整数的算术运算
所有算术运算（如加、减、乘、除）均适用于整数。

**1、 二进制补码的加减法**  
整数通常是以二进制补码形式存储的。二进制补码表示法的一个优点是加法和减法间没有区别。

加法 = A + B

减法 = A - B = A +（B̅ + 1），B̅ = B的反码

二进制补码中的加法就像十进制中的加法一样，列与列相加，如果有进位，就加到下一列上。但是，最后一列的进位被舍弃。

## 5.2 逻辑运算
逻辑运算是对二进制位（0 或 1）进行“与、或、非、异或”等基本操作，既能对单个位操作，也能同时对一组位（位模式）并行操作。

### 5.2.1 位层次上的逻辑运算
一个位可能是 0 或 1，可以假设 “0” 代表逻辑 “假”，而 “1” 代表逻辑 “真”。我们可以应用布尔代数中定义的运算去操纵二进制位。

**1、 非（NOT）**  
NOT 运算符是一元操作符：它只有一个输入。输出位与输入位相反，如果输入是 0，则输出为 1；如果输入为 1，则输出为 0。

NOT 运算符的真值表（真值表定义了对于每一种可能的输入的输出值）只有两行，因为单个输入只有两种可能： 0 或 1。

|   X   |   NOT X   |      
| ---- | ---- |
|   0   |   1   |      
|   1   |   0   |      

**2、 与（AND）**  
AND 运算符是二元运算符：它有两个输入。如果输入都是 1，则输出为 1，而在其他三种情况下，输出都是 0。AND 运算符的真值表有 4 行，因为两个输入有 4 种可能的输入组合。

|   X   |   Y   |   X AND Y   |
| ---- | ---- | ---- |
|   0   |   0   |   0   |
|   0   |   1   |   0   |
|   1   |   0   |   0   |
|   1   |   1   |   1   |

特性：AND 运算符有趣的一点是：如果一个输入中有一位是 0，则不需要检查其他输入中的相应的位，便可迅速得到结果为 0。

**3、 或（OR）**  
OR 运算符也是二元运算符：它有两个输入。如果输入都是 0，则输出为 0，而在其他三种情况下，输出都是 1。OR 运算符的真值表也有 4 行。

|   X   |   Y   |   X OR Y   |
| ---- | ---- | ---- |
|   0   |   0   |   0   |
|   0   |   1   |   1   |
|   1   |   0   |   1   |
|   1   |   1   |   1   |

特性：OR 运算符有趣的一点是，如果一个输入中有一位是 1，则不需要检查其他输入中的相应的位，便可迅速得到结果为 1。

**4、 异或（XOR）**  
XOR 运算符也是二元运算符：它有两个输入。如果输入都是 0或1，则输出为 0。当输入不同时，则输出为 1。

|   X   |   Y   |   X XOR Y   |
| ---- | ---- | ---- |
|   0   |   0   |   0   |
|   0   |   1   |   1   |
|   1   |   0   |   1   |
|   1   |   1   |   0   |

## 5.3 移位运算
移位运算移动模式中的位，改变位的位置。它们能向左或向右移动位。我们可以把移位运算分成两大类：逻辑移位运算和算术移位运算。

### 5.3.1 逻辑移位运算
逻辑移位运算应用于不带符号位的数。

**逻辑移位**  
逻辑右移运算把每一位向右移动一个位置。在 n 位模式中，最右位丢失，最左位补 0。逻辑左移运算把每一位向左移动一个位置。在 n 位模式中，最左位丢失，最右位填 0。

**循环移位**  
循环移位运算对位进行移位，但没有位被丢弃或增加。循环右移把每一位向石移动一个位置，最右位被回环，成为最左位。循环左移一位向左移动一个位置，最左位被回环，成为最右位。
### 5.3.2 算术移位运算
算术移位运算假定位模式是用二进制补码格式表示的带符号位的整数。算术右移被用来对整数除以 2；而算术左移被用来对整数乘以 2。这些运算不应该改变符号位（最左）。